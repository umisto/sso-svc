openapi: 3.1.1
info:
  description: swagger documentation for auth-svc
  title: netbill auth-svc API
  version: 0.1.0
servers:
- url: http://localhost:8001
paths:
  /auth-svc/v1/registration/:
    post:
      description: Endpoint to register a new user account.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Registration"
        required: true
      responses:
        "201":
          description: Account successfully registered
        "409":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Conflict: An account with this email or phone number already exists. Check the 'detail' field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal server error
      summary: Register a new account
      tags:
      - registration
  /auth-svc/v1/registration/admin:
    post:
      description: |
        Registers a new account by an authenticated admin.
        **403 Forbidden** is returned when the initiator is not active or does not have enough rights. **409 Conflict** is returned when the email is already taken.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegistrationAdmin"
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
          description: Account successfully registered by admin
        "400":
          content:
            application/json:
              examples:
                passwordNotAllowed:
                  summary: password is not allowed
                  value:
                    errors:
                    - status: 400
                      title: Bad Request
                      code: VALIDATION_ERROR
                      detail: password is not allowed
                      source:
                        pointer: /data/attributes/password
                roleNotSupported:
                  summary: role is not supported
                  value:
                    errors:
                    - status: 400
                      title: Bad Request
                      code: VALIDATION_ERROR
                      detail: role is not supported
                      source:
                        pointer: /data/attributes/role
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Bad Request. Request body is invalid or some attributes do not meet requirements. Check the `errors` array for details.
        "401":
          content:
            application/json:
              examples:
                failedToGetUserFromContext:
                  summary: failed to get user from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get user from context
                initiatorNotFound:
                  summary: failed to register admin user not found
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to register admin user not found
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Account cannot be resolved from context or initiator account not found. Check the `detail` field in the response for more information.
        "403":
          content:
            application/json:
              examples:
                initiatorNotActive:
                  summary: initiator account is not active
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: initiator account is not active
                notEnoughRights:
                  summary: only admins can register new admin accounts
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: only admins can register new admin accounts
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Forbidden. Initiator account is not active or does not have enough rights. Check the `detail` field in the response for more information.
        "409":
          content:
            application/json:
              examples:
                emailAlreadyExists:
                  summary: user with this email already exists
                  value:
                    errors:
                    - status: 409
                      title: Conflict
                      code: CONFLICT
                      detail: user with this email already exists
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Conflict. Email is already taken. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Register a new admin account
      tags:
      - registration
  /auth-svc/v1/login/:
    post:
      description: Endpoint to login a user using their email and password.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginByEmail"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokensPair"
          description: Successful login
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized: Invalid email or password. Check the 'detail' field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal server error
      summary: Login by email
      tags:
      - login
  /auth-svc/v1/login/google:
    post:
      description: |
        Redirects the user-agent to Google OAuth consent screen. This endpoint returns a redirect and does not return a JSON:API document.
      responses:
        "307":
          description: Temporary Redirect to Google OAuth consent screen
          headers:
            Location:
              description: Google OAuth authorization URL
              explode: false
              schema:
                format: uri
                type: string
              style: simple
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      summary: Start Google OAuth login
      tags:
      - login
  /auth-svc/v1/login/google/callback:
    get:
      description: |
        Exchanges Google OAuth `code` for user info and returns an access/refresh tokens pair.
      parameters:
      - description: OAuth authorization code returned by Google
        explode: true
        in: query
        name: code
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokensPair"
          description: Tokens pair issued
        "400":
          content:
            application/json:
              examples:
                codeRequired:
                  summary: code is required
                  value:
                    errors:
                    - status: 400
                      title: Bad Request
                      code: VALIDATION_ERROR
                      detail: code is required
                      source:
                        parameter: code
              schema:
                $ref: "#/components/schemas/Errors"
          description: Missing or invalid query parameter `code`
        "403":
          content:
            application/json:
              examples:
                notActive:
                  summary: account is not active
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: ACCOUNT_NOT_ACTIVE
                      detail: account is not active
              schema:
                $ref: "#/components/schemas/Errors"
          description: Account is not active
        "404":
          content:
            application/json:
              examples:
                notFound:
                  summary: user with this email not found
                  value:
                    errors:
                    - status: 404
                      title: Not Found
                      code: ACCOUNT_NOT_FOUND
                      detail: user with this email not found
              schema:
                $ref: "#/components/schemas/Errors"
          description: Account not found for this email
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      summary: Google OAuth callback
      tags:
      - login
  /auth-svc/v1/refresh:
    post:
      description: |
        Issues a new access/refresh tokens pair using a valid refresh token.
        **401 Unauthorized** is returned when the account or session does not exist. **403 Forbidden** is returned when the account is inactive or the refresh token does not match the session.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefreshSession"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokensPair"
          description: Tokens pair successfully refreshed
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Bad Request. Request body is invalid. Check the `errors` array for details.
        "401":
          content:
            application/json:
              examples:
                accountNotFound:
                  summary: account not found
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: account not found
                sessionNotFound:
                  summary: session not found
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: session not found
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Account not found or session not found. Check the `detail` field in the response for more information.
        "403":
          content:
            application/json:
              examples:
                accountNotActive:
                  summary: account is not active
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: account is not active
                refreshTokenMismatch:
                  summary: refresh session token mismatch
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: refresh session token mismatch
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Forbidden. Account is not active or refresh token mismatch. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      summary: Refresh session
      tags:
      - sessions
  /auth-svc/v1/me:
    delete:
      description: |
        Deletes the authenticated account.
        **401 Unauthorized** is returned when the account cannot be resolved from the provided credentials or the session is invalid. **403 Forbidden** is returned when the initiator account is blocked.
      responses:
        "204":
          description: Account successfully deleted
        "401":
          content:
            application/json:
              examples:
                failedToGetUserFromContext:
                  summary: failed to get user from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get user from context
                initiatorNotFound:
                  summary: initiator account not found by credentials
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator account not found by credentials
                sessionInvalid:
                  summary: initiator session is invalid
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator session is invalid
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Invalid credentials, initiator account not found, or session is invalid. Check the `detail` field in the response for more information.
        "403":
          content:
            application/json:
              examples:
                initiatorBlocked:
                  summary: initiator is blocked
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: initiator is blocked
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Forbidden. Initiator account is blocked. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Delete my account
      tags:
      - accounts
    get:
      description: |
        Returns the authenticated account.
        **401 Unauthorized** is returned when the account cannot be resolved from the provided credentials or the initiator account is not found.
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
          description: Account successfully retrieved
        "401":
          content:
            application/json:
              examples:
                failedToGetAccountFromContext:
                  summary: failed to get account from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get account from context
                initiatorNotFound:
                  summary: initiator account not found by credentials
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator account not found by credentials
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Invalid credentials or account cannot be resolved from context. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get my account
      tags:
      - accounts
  /auth-svc/v1/me/email:
    get:
      description: |
        Returns the email data of the authenticated account.
        **401 Unauthorized** is returned when the account cannot be resolved from the provided credentials or the initiator account is not found.
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountEmail"
          description: Email data successfully retrieved
        "401":
          content:
            application/json:
              examples:
                failedToGetUserFromContext:
                  summary: failed to get user from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get user from context
                initiatorNotFound:
                  summary: initiator account not found by credentials
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator account not found by credentials
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Invalid credentials or initiator account not found. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get my email data
      tags:
      - accounts
  /auth-svc/v1/me/logout:
    post:
      description: |
        Invalidates the current session of the authenticated account.
        **401 Unauthorized** is returned when the account cannot be resolved from the provided credentials.
      responses:
        "204":
          description: Successfully logged out
        "401":
          content:
            application/json:
              examples:
                failedToGetUserFromContext:
                  summary: failed to get user from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get user from context
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Account cannot be resolved from context. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Logout
      tags:
      - sessions
  /auth-svc/v1/me/password:
    patch:
      description: |
        Updates the password of the authenticated account.
        **401 Unauthorized** is returned when credentials are invalid, the session is invalid, or the old password is incorrect. **403 Forbidden** is returned when the initiator is blocked or password change is temporarily restricted.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdatePassword"
        required: true
      responses:
        "204":
          description: Password successfully updated
        "400":
          content:
            application/json:
              examples:
                passwordNotAllowed:
                  summary: password is not allowed
                  value:
                    errors:
                    - status: 400
                      title: Bad Request
                      code: VALIDATION_ERROR
                      detail: password is not allowed
                      source:
                        pointer: /data/attributes/password
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Bad Request. Request body is invalid or the new password does not meet requirements. Check the `errors` array for details.
        "401":
          content:
            application/json:
              examples:
                failedToGetUserFromContext:
                  summary: failed to get user from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get user from context
                userNotFound:
                  summary: failed to update password user not found
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to update password user not found
                sessionInvalid:
                  summary: initiator session is invalid
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator session is invalid
                invalidPassword:
                  summary: invalid password
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: invalid password
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Invalid credentials, invalid session, user not found, or invalid password. Check the `detail` field in the response for more information.
        "403":
          content:
            application/json:
              examples:
                initiatorBlocked:
                  summary: initiator is blocked
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: initiator is blocked
                cannotChangePasswordYet:
                  summary: cannot change password yet
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: cannot change password yet
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Forbidden. Initiator is blocked or password cannot be changed yet. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Update password
      tags:
      - accounts
  /auth-svc/v1/me/sessions:
    delete:
      description: |
        Deletes all sessions of the authenticated account (logout from all devices).
      responses:
        "204":
          description: Sessions successfully deleted
        "401":
          content:
            application/json:
              examples:
                failedToGetAccountFromContext:
                  summary: failed to get account from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get account from context
                initiatorNotFound:
                  summary: initiator account not found by credentials
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator account not found by credentials
                sessionInvalid:
                  summary: initiator session is invalid
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator session is invalid
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Invalid credentials, initiator account not found, or session is invalid. Check the `detail` field in the response for more information.
        "403":
          content:
            application/json:
              examples:
                initiatorNotActive:
                  summary: initiator is not active
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: initiator is not active
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Forbidden. Initiator is not active or blocked. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Delete my sessions
      tags:
      - sessions
    get:
      description: |
        Returns sessions of the authenticated account.
        Supports pagination via query parameters.
      parameters:
      - description: Max number of items to return
        explode: true
        in: query
        name: "page[limit]"
        required: false
        schema:
          minimum: 1
          type: integer
        style: form
      - description: Number of items to skip
        explode: true
        in: query
        name: "page[offset]"
        required: false
        schema:
          minimum: 0
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountSessionsCollection"
          description: Sessions successfully retrieved
        "401":
          content:
            application/json:
              examples:
                failedToGetUserFromContext:
                  summary: failed to get user from context
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: failed to get user from context
                initiatorNotFound:
                  summary: initiator account not found by credentials
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator account not found by credentials
                sessionInvalid:
                  summary: initiator session is invalid
                  value:
                    errors:
                    - status: 401
                      title: Unauthorized
                      code: UNAUTHORIZED
                      detail: initiator session is invalid
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Unauthorized. Invalid credentials, initiator account not found, or session is invalid. Check the `detail` field in the response for more information.
        "403":
          content:
            application/json:
              examples:
                initiatorBlocked:
                  summary: initiator is blocked
                  value:
                    errors:
                    - status: 403
                      title: Forbidden
                      code: FORBIDDEN
                      detail: initiator is blocked
              schema:
                $ref: "#/components/schemas/Errors"
          description: |
            Forbidden. Initiator is blocked. Check the `detail` field in the response for more information.
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get my sessions
      tags:
      - sessions
  /auth-svc/v1/me/sessions/{session_id}:
    delete:
      description: |
        Deletes all sessions of the authenticated account (logout from all devices).
      parameters:
      - description: Session ID
        explode: false
        in: path
        name: session_id
        required: true
        schema:
          format: uuid
          type: string
        style: simple
      responses:
        "204":
          description: Sessions successfully deleted
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Forbidden
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Delete my sessions
      tags:
      - sessions
    get:
      description: |
        Returns sessions of the authenticated account.
      parameters:
      - description: Max number of items to return
        explode: true
        in: query
        name: "page[limit]"
        required: false
        schema:
          minimum: 1
          type: integer
        style: form
      - description: Number of items to skip
        explode: true
        in: query
        name: "page[offset]"
        required: false
        schema:
          minimum: 0
          type: integer
        style: form
      - description: Session ID
        explode: false
        in: path
        name: session_id
        required: true
        schema:
          format: uuid
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountSessionsCollection"
          description: Sessions successfully retrieved
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Unauthorized
        "403":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Forbidden
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Errors"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get my sessions
      tags:
      - sessions
    parameters:
    - description: Session ID
      explode: false
      in: path
      name: session_id
      required: true
      schema:
        format: uuid
        type: string
      style: simple
components:
  schemas:
    LoginByEmail:
      example:
        data:
          attributes:
            password: StrongP@ssw0rd!
            email: example@gmail.com
          type: login_by_email
      properties:
        data:
          $ref: "#/components/schemas/LoginByEmail_data"
      required:
      - data
    Registration:
      example:
        data:
          attributes:
            password: StrongP@ssw0rd!
            email: example@gmail.com
          type: registration_account
      properties:
        data:
          $ref: "#/components/schemas/Registration_data"
      required:
      - data
    RegistrationAdmin:
      example:
        data:
          attributes:
            password: StrongP@ssw0rd!
            role: admin
            email: example1312@gmail.com
          type: registration_account_by_admin
      properties:
        data:
          $ref: "#/components/schemas/RegistrationAdmin_data"
      required:
      - data
    RefreshSession:
      example:
        data:
          attributes:
            refresh_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          type: refresh_account_session
      properties:
        data:
          $ref: "#/components/schemas/RefreshSession_data"
      required:
      - data
    UpdatePassword:
      example:
        data:
          attributes:
            old_password: OldP@ssw0rd!
            new_password: StrongP@ssw0rd!
          type: update_account_password
      properties:
        data:
          $ref: "#/components/schemas/UpdatePassword_data"
      required:
      - data
    TokensPair:
      example:
        data:
          attributes:
            access_token: access_token
            refresh_token: refresh_token
          id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          type: tokens_pair
      properties:
        data:
          $ref: "#/components/schemas/TokensPair_data"
      required:
      - data
    AccessToken:
      properties:
        data:
          $ref: "#/components/schemas/AccessToken_data"
      required:
      - data
    AccountSession:
      properties:
        data:
          $ref: "#/components/schemas/AccountSessionData"
      required:
      - data
    AccountSessionData:
      example:
        attributes:
          account_id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          last_used: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
        id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
        type: account_session
      properties:
        id:
          description: session id
          format: uuid
          type: string
        type:
          enum:
          - account_session
          type: string
        attributes:
          $ref: "#/components/schemas/AccountSessionAttributes"
      required:
      - attributes
      - id
      - type
    AccountSessionAttributes:
      example:
        account_id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
        last_used: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
      properties:
        account_id:
          description: account id
          format: uuid
          type: string
        created_at:
          description: session creation date
          format: date-time
          type: string
        last_used:
          description: last used date
          format: date-time
          type: string
      required:
      - account_id
      - created_at
      - last_used
    AccountSessionsCollection:
      example:
        data:
        - attributes:
            account_id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
            last_used: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
          id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          type: account_session
        - attributes:
            account_id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
            last_used: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
          id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          type: account_session
        links:
          next: https://openapi-generator.tech
          last: https://openapi-generator.tech
          prev: https://openapi-generator.tech
          self: https://openapi-generator.tech
          first: https://openapi-generator.tech
      properties:
        data:
          items:
            $ref: "#/components/schemas/AccountSessionData"
          type: array
        links:
          $ref: "#/components/schemas/PaginationData"
      required:
      - data
      - links
    Account:
      example:
        data:
          attributes:
            role: role
            updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
          id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          type: account
      properties:
        data:
          $ref: "#/components/schemas/Account_data"
      required:
      - data
    AccountEmail:
      example:
        data:
          attributes:
            updated_at: 2000-01-23T04:56:07.000+00:00
            verified: true
            email: email
          id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
          type: account_email
      properties:
        data:
          $ref: "#/components/schemas/AccountEmail_data"
      required:
      - data
    Errors:
      description: Standard JSON:API error
      example:
        errors:
        - detail: Request body was expected
          title: Bad Request
          status: 400
        - detail: Request body was expected
          title: Bad Request
          status: 400
      properties:
        errors:
          description: Non empty array of errors occurred during request processing
          items:
            $ref: "#/components/schemas/Errors_errors_inner"
          type: array
      required:
      - errors
    PaginationData:
      example:
        next: https://openapi-generator.tech
        last: https://openapi-generator.tech
        prev: https://openapi-generator.tech
        self: https://openapi-generator.tech
        first: https://openapi-generator.tech
      properties:
        self:
          description: link to the current page
          format: uri
          type: string
        first:
          description: link to the first page
          format: uri
          type: string
        last:
          description: link to the last page
          format: uri
          type: string
        prev:
          description: link to the previous page
          format: uri
          type: string
        next:
          description: link to the next page
          format: uri
          type: string
      required:
      - self
    LoginByEmail_data_attributes:
      example:
        password: StrongP@ssw0rd!
        email: example@gmail.com
      properties:
        email:
          description: The account's email address.
          example: example@gmail.com
          format: email
          type: string
        password:
          description: The account's password.
          example: StrongP@ssw0rd!
          format: password
          type: string
      required:
      - email
      - password
    LoginByEmail_data:
      example:
        attributes:
          password: StrongP@ssw0rd!
          email: example@gmail.com
        type: login_by_email
      properties:
        type:
          enum:
          - login_by_email
          type: string
        attributes:
          $ref: "#/components/schemas/LoginByEmail_data_attributes"
      required:
      - attributes
      - type
    Registration_data:
      example:
        attributes:
          password: StrongP@ssw0rd!
          email: example@gmail.com
        type: registration_account
      properties:
        type:
          enum:
          - registration_account
          type: string
        attributes:
          $ref: "#/components/schemas/LoginByEmail_data_attributes"
      required:
      - attributes
      - type
    RegistrationAdmin_data_attributes:
      example:
        password: StrongP@ssw0rd!
        role: admin
        email: example1312@gmail.com
      properties:
        email:
          description: The account's email address.
          example: example1312@gmail.com
          format: email
          type: string
        password:
          description: The account's password.
          example: StrongP@ssw0rd!
          format: password
          type: string
        role:
          description: The role assigned to the registering account.
          enum:
          - admin
          - moderator
          example: admin
          type: string
      required:
      - email
      - password
      - role
    RegistrationAdmin_data:
      example:
        attributes:
          password: StrongP@ssw0rd!
          role: admin
          email: example1312@gmail.com
        type: registration_account_by_admin
      properties:
        type:
          enum:
          - registration_account_by_admin
          type: string
        attributes:
          $ref: "#/components/schemas/RegistrationAdmin_data_attributes"
      required:
      - attributes
      - type
    RefreshSession_data_attributes:
      example:
        refresh_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      properties:
        refresh_token:
          description: The refresh token to generate a new access token.
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          type: string
      required:
      - refresh_token
    RefreshSession_data:
      example:
        attributes:
          refresh_token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: refresh_account_session
      properties:
        type:
          enum:
          - refresh_account_session
          type: string
        attributes:
          $ref: "#/components/schemas/RefreshSession_data_attributes"
      required:
      - attributes
      - type
    UpdatePassword_data_attributes:
      example:
        old_password: OldP@ssw0rd!
        new_password: StrongP@ssw0rd!
      properties:
        old_password:
          description: The account's current password.
          example: OldP@ssw0rd!
          format: password
          type: string
        new_password:
          description: The account's password.
          example: StrongP@ssw0rd!
          format: password
          type: string
      required:
      - new_password
      - old_password
    UpdatePassword_data:
      example:
        attributes:
          old_password: OldP@ssw0rd!
          new_password: StrongP@ssw0rd!
        type: update_account_password
      properties:
        type:
          enum:
          - update_account_password
          type: string
        attributes:
          $ref: "#/components/schemas/UpdatePassword_data_attributes"
      required:
      - attributes
      - type
    TokensPair_data_attributes:
      example:
        access_token: access_token
        refresh_token: refresh_token
      properties:
        access_token:
          description: Access Token
          type: string
        refresh_token:
          description: Refresh Token
          type: string
      required:
      - access_token
      - refresh_token
    TokensPair_data:
      example:
        attributes:
          access_token: access_token
          refresh_token: refresh_token
        id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
        type: tokens_pair
      properties:
        id:
          description: account id
          format: uuid
          type: string
        type:
          enum:
          - tokens_pair
          type: string
        attributes:
          $ref: "#/components/schemas/TokensPair_data_attributes"
      required:
      - attributes
      - id
      - type
    AccessToken_data_attributes:
      properties:
        refresh_token:
          description: The access token to generate a new access token.
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          type: string
      required:
      - access_token
    AccessToken_data:
      properties:
        type:
          enum:
          - access_token
          type: string
        attributes:
          $ref: "#/components/schemas/AccessToken_data_attributes"
      required:
      - attributes
      - type
    Account_data_attributes:
      example:
        role: role
        updated_at: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
      properties:
        role:
          description: The role assigned to the account
          type: string
        created_at:
          description: The date and time when the account was created
          format: date-time
          type: string
        updated_at:
          description: The date and time when the account was last updated
          format: date-time
          type: string
      required:
      - created_at
      - role
      - updated_at
    Account_data:
      example:
        attributes:
          role: role
          updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
        id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
        type: account
      properties:
        id:
          description: account ID
          format: uuid
          type: string
        type:
          enum:
          - account
          type: string
        attributes:
          $ref: "#/components/schemas/Account_data_attributes"
      required:
      - attributes
      - id
      - type
    AccountEmail_data_attributes:
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        verified: true
        email: email
      properties:
        email:
          description: The email address associated with the account
          format: email
          type: string
        verified:
          description: Indicates whether the email address has been verified
          type: boolean
        updated_at:
          description: The date and time when the email information was last updated
          format: date-time
          type: string
      required:
      - email
      - updated_at
      - verified
    AccountEmail_data:
      example:
        attributes:
          updated_at: 2000-01-23T04:56:07.000+00:00
          verified: true
          email: email
        id: 046b6c7f-0b8a-43b9-b35d-6489e6daee91
        type: account_email
      properties:
        id:
          description: account ID
          format: uuid
          type: string
        type:
          enum:
          - account_email
          type: string
        attributes:
          $ref: "#/components/schemas/AccountEmail_data_attributes"
      required:
      - attributes
      - id
      - type
    Errors_errors_inner:
      example:
        detail: Request body was expected
        title: Bad Request
        status: 400
      properties:
        title:
          description: "Title is a short, human-readable summary of the problem"
          example: Bad Request
          type: string
        detail:
          description: Detail is a human-readable explanation specific to this occurrence
            of the problem
          example: Request body was expected
          type: string
        status:
          description: Status is the HTTP status code applicable to this problem
          enum:
          - 400
          - 401
          - 403
          - 404
          - 409
          - 500
          example: 400
          type: integer
      required:
      - status
      - title
